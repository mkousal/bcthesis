% Soubory musí být v kódování, které je nastaveno v příkazu \usepackage[...]{inputenc}

\documentclass[%        Základní nastavení
  %draft,    				  % Testovací překlad
  12pt,       				% Velikost základního písma je 12 bodů
	t,                  % obsah slajdů bude vždy začínat od shora (nebude vertikálně centrovaný)
	aspectratio=1610,   % poměr stran bude 16:10 (všechny projektory v učebnách na Technické 12 Brno),
	                    % další volby jsou 43, 149, 169, 54, 32.
	unicode,						% Záložky a informace budou v kódování unicode
]{beamer}				    	% Dokument třídy 'zpráva', vhodná pro sazbu závěrečných prací s kapitolami
%\usepackage{etex}

\usepackage[utf8]		  % Kódování zdrojových souborů je v UTF-8
	{inputenc}					% Balíček pro nastavení kódování zdrojových souborů
	
\usepackage{graphicx} % Balíček 'graphicx' pro vkládání obrázků
											% Nutné pro vložení logotypů školy a fakulty

\usepackage[          % Balíček 'acronym' pro sazby zkratek a symbolů
	nohyperlinks				% Nebudou tvořeny hypertextové odkazy do seznamu zkratek
]{acronym}						
											% Nutné pro použití prostředí 'acronym' balíčku 'thesis'

%% Balíček hyperref je volán třídou beamer automaticky, proto není třeba následujícího kódu:
%\usepackage[
%	breaklinks=true,		% Hypertextové odkazy mohou obsahovat zalomení řádku
%	hypertexnames=false % Názvy hypertextových odkazů budou tvořeny
%											% nezávisle na názvech TeXu
%]{hyperref}						% Balíček 'hyperref' pro sazbu hypertextových odkazů
%											% Nutné pro použití příkazu 'nastavenipdf' balíčku 'thesis'

\usepackage{cmap} 		% Balíček cmap zajišťuje, že PDF vytvořené `pdflatexem' je
											% plně "prohledávatelné" a "kopírovatelné"

%\usepackage{upgreek}	% Balíček pro sazbu stojatých řeckých písmem
											%% např. stojaté pí: \uppi
											%% např. stojaté mí: \upmu (použitelné třeba v mikrometrech)
											%% pozor, grafická nekompatibilita s fonty typu Computer Modern!

%\usepackage{amsmath} %balíček pro sabu náročnější matematiky

\usepackage{booktabs} % Balíček, který umožňuje v tabulce používat
                      % příkazy \toprule, \midrule, \bottomrule


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%      Definice informací o dokumentu             %%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{nastaveni}      % v tomto souboru doplňte údaje o sobě, o názvu práce...
                       % (tento soubor je sdílený s textem práce)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%     Nastavení polí ve Vlastnostech dokumentu PDF      %%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Při vloženém balíčku 'hyperref' lze použít příkaz '\pdfsettings'
\pdfsettings
%  Nastavení polí je možné provést také ručně příkazem:
%\hypersetup{
%  pdftitle={Název studentské práce},    	% Pole 'Document Title'
%  pdfauthor={Autor studenstké práce},   	% Pole 'Author'
%  pdfsubject={Typ práce}, 						  	% Pole 'Subject'
%  pdfkeywords={Klíčová slova}           	% Pole 'Keywords'
%}
\hypersetup{pdfpagemode=FullScreen}       % otevření rovnou v režimu celé obrazovky
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usetheme{VUT} 				% barvy a rozložení prezentace odpovídající VUT FEKT
% alternativně lze použít jiná berevná témata, ale bez záruky. Například: 
%\usetheme{Darmstadt} \usecolortheme{default2}
\logoheader					% vytvoření zkráceného loga VUT FEKT v hlavičce slajdu, nechte odkomentované



\begin{document}

% v případě zakomentování následujícího se zobrazí v pravém dolním rohu slajdů klikatelné navigační symboly 
\disablenavigationsymbols

% titulní snímek, vysazen bez horních, dolních a postranních lišt (volba plain),
% není tak vysazen ani nadpis snímku
\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 1. snímek s cíli (zadaním) práce
\begin{frame} 
	% nadpis snímku
	\frametitle{Cíle práce}
	\begin{columns}[T]
		\begin{column}{0.4\textwidth}
			\vspace{0.5cm}
			\begin{itemize}
				\item Prostudovat dostupné senzory
				\item Vybrat vhodné senzory
				\item Prostudovat možnosti přenosu dat
				\item Navrhnout obvodové zapojení
				\item Realizovat desku plošných spojů
				\item Oživit a naprogramovat zařízení
    			\item Vizualizovat naměřená data
			\end{itemize}
		\end{column}

		\begin{column}{0.6\textwidth}
			\centering
			\vspace{1.5cm}
			\includegraphics[width=\columnwidth]{obrazky/block_schematic-blank.drawio.pdf}
		\end{column}
	\end{columns}
	
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
	\frametitle{Návrh zařízení}
	\begin{columns}[T]
		\begin{column}{0.4\textwidth}
			Měřené veličiny
			\begin{itemize}
				\item Koncentrace CO$_{2}$
				\item Hodnota Total VOC
				\item Koncentrace prachových částic
				\item Intenzita osvětlení
				\item UV záření
			\end{itemize}
			Doplňkové veličiny
			\begin{itemize}
				\item Teplota
				\item Relativní vlhkost vzduchu
				\item Atmosférický tlak
			\end{itemize}	
		\end{column}

		\begin{column}{0.6\textwidth}
			\begin{figure}
				\centering
				\vspace{4ex}
				\includegraphics[width=\textwidth]{obrazky/block_schematic.png}
			\end{figure}
			
		\end{column}
	\end{columns}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
	\frametitle{Přenos a zpracování dat}
	Uvažované přenosové sítě
	\begin{itemize}
		\item Sigfox
		\item WiFi
		\item LoRaWAN
		\item NB-IoT
	\end{itemize}

	Zpracování dat
	\begin{itemize}
		\item Možnost využití platforem - ThingSpeak, ubidots, Arduino Cloud, \dots
		\item Zvoleno vlastní řešení - \textbf{databáze \texttt{+} Grafana}
	\end{itemize}

	\vspace{0.5ex}
	\begin{columns}
		\begin{column}{0.45\textwidth}
			LoRaWAN\\[0.5ex]
			\begin{itemize}
				\item The Things Network
				\item Node-RED
				\item InfluxDB
			\end{itemize}

		\end{column}

		\begin{column}{0.45\textwidth}
			WiFi\\[0.5ex]
			\begin{itemize}
				\item MQTT broker (Mosquitto)
				\item Node-RED
				\item InfluxDB
			\end{itemize}
		\end{column}
	\end{columns}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
	\frametitle{Napájení}

	\vspace{1ex}
	Při návrhu kladen důraz na:
	\begin{itemize}
		\item Možnost bateriového napájení
		\item Minimalizace počtu měničů napětí
		\item Co nejnižší spotřeba
	\end{itemize}

	\vspace{1.5ex}
	Výsledkem je:
	\begin{itemize}
		\item LiFePO4 baterie
		\item Nabíječka s možností MPPT
		\item Spotřeba v deep-sleep režimu $5,8~\mu A$
		\begin{itemize}
			\item Spotřeba ESP32 dle výrobce $5~\mu A$
			\item Vypínatelné senzory a pull-up rezistory
			\item ESP32 napájeno přímo z baterie bez měniče
		\end{itemize}
	\end{itemize}


\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \begin{frame}
% 	\frametitle{Návrh DPS}
% 	\begin{itemize}
% 		\item Výsledkem jsou dvouvrstvé DPS
% 	\end{itemize}
% 	\begin{columns}
% 		\begin{column}{0.5\textwidth}
% 			\centering
% 			Hlavní deska $50x100~mm$
% 			\begin{figure}
% 				\centering
% 				\includegraphics[height=0.65\textheight]{obrazky/mainBoard-kicad.png}
% 			\end{figure}
% 		\end{column}

% 		\begin{column}{0.5\textwidth}
% 			\centering
% 			Nabíječka $40x40~mm$
% 			\begin{figure}
% 				\centering
% 				\vspace{3ex}
% 				\includegraphics[width=0.7\textwidth]{obrazky/batteryCharger-top_.png}
% 			\end{figure}

% 		\end{column}
% 	\end{columns}
% \end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
	\frametitle{Realizovaná DPS}
	\begin{columns}
		\begin{column}{0.6\textwidth}
			\centering
			Hlavní deska $50x100~mm$
			\begin{figure}
				\centering
				\begin{figure}
					\includegraphics[width=0.85\textwidth]{obrazky/final_pcb_both.png}
				\end{figure}
			\end{figure}
		\end{column}

		\begin{column}{0.4\textwidth}
			\centering
			Nabíječka $40x40~mm$
			\begin{figure}
				\centering
				\vspace{8ex}
				\includegraphics[width=0.9\textwidth]{obrazky/batteryCharger-final.png}
			\end{figure}
		\end{column}
	\end{columns}
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
	\frametitle{Finální zařízení}
	\centering
	\includegraphics[angle=90,origin=c,width=0.95\textwidth]{obrazky/finalDevice.jpg}	

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}
	\frametitle{Naměřená data}
	\begin{figure}
		\centering
		\includegraphics[width=\textwidth]{obrazky/grafana.png}
	\end{figure}


\end{frame}

%%%%%%%%%%%%%
% \begin{frame} 
% 	\frametitle{Klíčové nástroje}

% 	% prostředí 'alertblock', které slouží pro zdůraznění informace
% 	\begin{alertblock}{Pro práci je klíčový Eulerův vzorec}
% 		$$\eul^{\jmag x}=\cos x + \jmag\sin x$$
% 	\end{alertblock}

% 	\vspace{4ex}
% 	Eulerova identita je speciálním případem tohoto vzorce, jestliže dosadíme $x=\uppi$\,:

% 	% prostředí 'block', které slouží jako informativní
% 	\begin{block}{Eulerova identita}
% 		$$\eul^{\jmag \uppi}=\cos \uppi + \jmag\sin \uppi,$$\\
% 		odkud vyplývá
% 		$$\eul^{\jmag \uppi}+1=0.$$
% 	\end{block}
% \end{frame} 


%%%%%%%%%%%%%
% \begin{frame} 
% 	\frametitle{Plošný spoj}
	
% 	\begin{columns}[T] 								% prostředí sloupce s umístěním nahoře
% 		\begin{column}{0.4\textwidth}		% první sloupec
% 			Obrázek znázorňuje model:\\[2ex]
% 			%
% 			\begin{itemize}
% 				\item Deska
% 				\item Součástky
% 				\item Signály
% 				\item Napájení
% 			\end{itemize}
% 		\end{column}
% 		%
% 		\begin{column}{0.6\textwidth}		% druhý sloupec
% 			\begin{figure}%	
% 				\centering
% 				\vspace{1cm}	              % horizontální mezera
% 				\includegraphics[width=0.8\columnwidth]{obrazky/soucastky}
% 				%lze vložit popisek, ale povetšinou je to v prezentaci zbytečné
% 				%\caption{Popisek obrázku}%
% 				%\label{obr:ukazka}
% 			\end{figure}
% 		\end{column}
% 	\end{columns}											% ukončení prostředí sloupce
% \end{frame}


%%%%%%%%%%%%%
% \begin{frame} 
% 	\frametitle{Výsledky}
% 	\vspace{1cm}
% 	\begin{table}[]
% 		\centering
% 		\caption{Výsledky měření mobilních sítí}
% 		\label{tab:tabulka}
% 			\begin{tabular}{lcc}
% 				\toprule
% 					Technologie  & Rychlost stahování [kB/s] & Rychlost nahrávání [kB/s] \\
% 				\midrule
% 					GPRS (2,5G)	& 7,2 	& 3,6\\
% 					UMTS 3G     & 48 		& 48\\
% 					HSPA (3,5G)	&	1\,706	&	720\\
% 					LTE (4G) 		& 40\,750 & 10\,750\\
% 				\bottomrule                                       
% 			\end{tabular}
% 	\end{table}
% \end{frame}


%%%%%%%%%%%%%
\begin{frame} 
	\frametitle{Závěr}
	Splněné cíle
	\begin{itemize}
		\item Zařízení umožňuje měřit kvalitu ovzduší
  		\item Uživatel si může zobrazit naměřená data a statistiky
		\item Výsledná cena je okolo 1600 Kč
		\item Spotřeba zařízení umožňuje provoz na jednu 3200~mAh baterii s periodou měření 1~hodina po dobu až 160~dní
		\item Při zapojení solárního panelu je možný neomezeně dlouhý provoz
	\end{itemize}
\end{frame}


% podekovani
\begin{frame}[c] 
% bez nadpisu snímku
	\frametitle{\mbox{ }}
	\begin{center}
		{\Huge Děkuji za pozornost!}
	\end{center}
\end{frame}

% otázky oponenta
\frame{
\frametitle{Otázky oponenta}
	\emph{Jakým způsobem je měřen proudový odběr zařízení v režimu spánku a během aktivity, zmiňovaný v závěru? Uveďte výpočty teoretické životnosti baterie pro WiFi a pro LoRaWAN komunikaci.}\\[2ex]
	%
	Průměrná spotřeba při použití LoRaWAN:
	\begin{equation}
		I_{avg}= \frac{I_{wake}\cdot t_{wake} + I_{sleep}\cdot t_{sleep}}{t_{wake}+ t_{sleep}} = \frac{0,1 \cdot 30 + 5,8\cdot 10^{-6}\cdot 3600}{30 + 3600} = 832\: \mu A
	\end{equation}
	Teoretická výdrž akumulátoru:
	\begin{equation}
		\frac{C}{I_{avg}} = \frac{3200 mAh}{832 \mu A} \div 24 = 160,3\: dnů
	\end{equation}
	Pro WiFi je $I_{avg} = 997,5\: \mu A$ a teoretická výdrž je tedy $133,7$ dnů
}

\frame{
\frametitle{Otázky oponenta}
	\emph{Popište funkci I2C level shifteru (Q7 a Q8 na str. 67).}\\[2ex]

	\centering
	\includegraphics[height=0.7\textheight]{obrazky/level_shifter.pdf}

}

\end{document}
